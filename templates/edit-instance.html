<div ng-include src="'templates/header.html'"></div>
<div class="container-fluid">
<div class="row">
<div class="col-sm-8">

<div ng-show="propertyValues || linkValues">
        <legend>{{formLabel}}</legend>
		<form>
			<div ng-repeat="inputField in inputFields track by $index" class="form-group">
				<div ng-init="typeName = inputField.typeRef.typeName; typeKind = inputField.typeRef.kind">
					<div ng-if="typeKind == 'Primitive' && typeName != 'Memo' && typeName != 'Date'">
					    <label>{{inputField.label}}:</label>
					    <input type="text" class="form-control" id="{{inputField.name}}" ng-model="propertyValues[inputField.name]">
					</div>
					
                <div ng-if="typeKind == 'Primitive' && typeName == 'Memo'">
                    <label>{{inputField.label}}:</label>
                    <textarea class="form-control" id="{{inputField.name}}" ng-model="propertyValues[inputField.name]">
                    </textarea>
                </div>
					
					<div ng-if="typeKind == 'Primitive' && typeName == 'Date'" ng-init="inputField.pickerStatus = { opened: true }">
					    <label>{{inputField.label}}:</label>
					    <p class="input-group">
					    	<input type="text" class="form-control" is-open="datePickerStatus[inputField.name]" datepicker-popup="yyyy/MM/dd" id="{{inputField.name}}" ng-model="propertyValues[inputField.name]">
					    	<span class="input-group-btn">
				                <button type="button" class="btn btn-default" ng-click="toggleDatePicker($event, inputField.name)"><i class="glyphicon glyphicon-calendar"></i></button>
				            </span>
				    	</p>
					</div>
					
					<div ng-if="typeKind == 'Enumeration'">
					    <label>{{inputField.label}}:</label>
					    <p>
					    <select ng-model="propertyValues[inputField.name]" class="form-control">
							<option ng-repeat="literal in inputField.enumerationLiterals">{{literal}}</option>
                        </select>
                        </p>
					</div>
					<div ng-if="typeKind == 'Entity'">
					    <label>{{inputField.label}}:</label>
					    <input
					        type="text" class="form-control" 
					        id="{{inputField.name}}"
					        ng-model="linkValues[inputField.name].shorthand"
					        typeahead="shorthand as candidate.shorthand for candidate in findCandidatesFor(inputField, $viewValue)"
					        typeahead-min-length="0"
					        typeahead-input-formatter="formatCandidate(inputField)"
					        typeahead-on-select="onCandidateSelected($item, inputField, $label)">
					</div>
				</div>
			</div>
		</form>
</div>
<div ng-show="raw==undefined">Loading...</div>
</div>
<div class="col-sm-4">
        <div >
              <div class="btn-group" role="group">
                  <button type="button" class="btn btn-default" ng-click="cancel()">
                      Cancel
	              </button>
	              <button type="button" class="btn btn-default" ng-click="save()">
                      Save
	              </button>
              </div>
        </div>
</div>
</div>
